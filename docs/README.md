## 帆软报表设计常见问题



### 一、数据源方面问题

#### 1.1 本地配置phonix连接

> 本地配置phonix连接
>
> 1. 在/webroot/WEB-INF/lib中添加phonix的jar文件phoenix-4.13.2-cdh5.11.2-client.jar
>
> 2. 在/webroot/WEB-INF/classes中添加hbase-site.xml文件
>
> ```xml
> <?xml version="1.0" encoding="UTF-8"?>
> 
> <!--Autogenerated by Cloudera Manager-->
> <configuration>
>   <property> 
>     <name>phoenix.schema.isNamespaceMappingEnabled</name>
>     <value>true</value>
>   </property>
> </configuration>
> ```
>
> 3. 在配置管理中配置数据连接
>
> 驱动器：org.apache.phoenix.jdbc.PhoenixDriver
>
> url: jdbc:phoenix:DB-test4,DB-test5,DB-test6:2181
>
> 4. 在hosts中添加上ip信息，进入C:\Windows\System32\drivers\etc
>
> ```
> 192.168.235.3 DB-test1
> 192.168.235.4 DB-test2
> 192.168.235.5 DB-test3
> 192.168.235.6 DB-test4
> 192.168.235.7 DB-test5
> 192.168.235.8 DB-test6
> 192.168.235.10 bd-test-hadoop-235-10
> 192.168.235.11 bd-test-hadoop-235-11
> 192.168.235.12 bd-test-DataAnalysis-235-12
> 192.168.235.13 bd-test-DataAnalysis-235-13
> 192.168.243.21 bd-test-scheduling-243-21
> 192.168.243.22 bd-test-scheduling-243-22
> 
> 192.168.243.25 bd-test-cdh-243-25
> 192.168.243.26 bd-test-cdh-243-26
> 192.168.243.27 bd-test-cdh-243-27
> ```
>



### 二、显示预览方面问题

#### 2.1 打开报表跳到登陆页面的问题

1. 在帆软设计器中，预览报表时出现要求登录数据决策系统的情况  
     ![loginImg](/img/20190929103004.png)  **解决：在第一次预览的时候需要确定用户权限问题，所以需要登陆，登陆蓝数通，浏览器会记住帆软账号，之后预览就不再需要登陆，就不会出现该情况；如果还出现该情况，请检查预览的地址是否争取** **

     **正确的地址如下：**

     **测试环境：`https://testbmreport.bluemoon.com.cn/webroot/decision`**  

     **生产环境：`https://bmreport.bluemoon.com.cn/webroot/decision`**  

#### 2.2 预览报表时出现IP的问题

问题：在帆软设计器中，预览报表时预览的地址出现ip地址的情况  

**解决：检查帆软设计器的远程服务器配置是否配置正确，`文件=》切换工作目录=》其他`**  
![loginImg](/img/20190929111813.png) 

**查看主机位置的地址是否正确，**  

**测试环境：`https://testbmreport.bluemoon.com.cn/webroot/decision`**  

**生产环境：`https://bmreport.bluemoon.com.cn/webroot/decision`**  

#### 2.3 报表分页问题

问题：页面显示有分页，但是显示不出来内容  
**解决：主要是行式引擎的两个写sql的地方, 数据集sql那里正常执行, 但分页sql那里sql有问题没能取到数据导致的**

#### 2.4 数据集sql查询时出现问题

问题：更新本地的帆软设计器后，编写sql查询，出现异常
![sqlerrorimg](/img/fanruan2019122401.jpg)
 **解决：主要是更新后jar包版本不一致，还原jar包就行**

#### 2.5 全局配置问题

问题：全局自适应属性配置导致所有的报表排版出现问题
![fanruan2019122402](/img/fanruan2019122402.jpg)
**解决：在模板-》模板自适应属性配置页面中选择不自适应**

### 三、样式方面问题

#### 3.1报表行高问题

问题：页面显示的一行的高度变小，与设计的8MM不一至  
**解决：主要问题是一页显示的行数过多，把一页的行数调少即可。**

#### 3.2 报表滚动条问题

问题：报表滚动条看不到  
**解决：主要是电脑的分辨率过高，导致滚动条看不到；**

### 四、导出方面问题

#### 4.1 长时间导出的问题

问题：长时间导出的问题对应的方案，提示canceling-statement-due-to-conflict-with-recovery
原因：读一个数据的时候，这个数据在主库做了更新，这个更新需要在30s内同步到从库，如果时间太长，数据就不能保证一致，那么从库上正在进行的查询就是不一致的，为了减少这种不一致，强制将从库的查询断开  也就是query从库和recovery从库的冲突，现在把这个默认时间改大了；  
**解决：DBA把时间加大**





### 帆软官方文档

文档地址：[帆软官方文档](https://help.finereport.com/)
